---
title: react-hook-form 라이브러리
date: August 15, 2022
description: react-hook-form은 React 환경에서 폼(form) 관리를 더 간단하게 할 수 있는 라이브러리 패키지입니다.
category: react, library
---

import { prefix } from "../config/config";

react-hook-form은 React 환경에서 Input Validation, Form Submit 등 폼(form) 관리를 더 간단하게 할 수 있는 라이브러리 패키지입니다.

### Install

```bash
npm install react-hook-form
yarn add react-hook-form
```

### 기본 예제

```jsx
// ReactHookForm.jsx
import React from "react";
import { useForm } from "react-hook-form";

export const ReactHookForm = () => {
  const {
    register,
    handleSubmit,
    watch,
    formState: { errors },
  } = useForm();
  const onSubmit = (data) => {
    console.log(data); // form submit을 처리합니다
  };

  console.log(watch("example")); // "example"이라는 이름의 값을 불러옵니다

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      // "handleSubmit"이 "onSubmit"이 발생하기 전에 input 값을 검사합니다
      <input defaultValue="test" {...register("example")} />
      // "register"함수로 input을 hook에 등록합니다
      <input {...register("exampleRequired", { required: true })} />
      // input의 유효성 검사를 위한 validation option을 추가합니다
      {errors.exampleRequired && <span>This field is required</span>}
      // 유효성 검사에 실패하면 errors가 반환됩니다
      <input type="submit" />
    </form>
  );
};
```

### register

register는 input 이나 select 요소를 react-hook-form 라이브러리에 등록하고 유효성 검사를 적용할 수 있는 함수입니다. input에 `{...register("name", { required:true, maxLength: 26, pattern: /[A-Za-z]+$/i })}` 같은 형식으로 넣어줄 수 있습니다.
Register Options

- required : 폼 제출을 위해 반드시 필요한 경우 true로 지정
- min : 입력에 허용되는 최솟값
- max : 입력에 허용되는 최댓값
- minLength : 입력에 허용되는 최소 길이
- maxLength : 입력에 허용되는 최대 길이
- pattern : 입력에 대한 정규식 패턴
- validate : 콜백 함수를 통한 검증

### unregister

unregister 함수로 제출된 폼 데이터에 해당값이 포함되지 않도록 등록 취소할 수 있습니다.
`unregister("name")`

### errors

각 input에 대응되는 폼 에러 혹은 에러 메시지를 가진 객체입니다.

```jsx
import React from "react";
import { useForm } from "react-hook-form";

export const Form = () => {
  const {
    register,
    formState: { errors },
    handleSubmit,
  } = useForm();
  const onSubmit = (data) => console.log(data);

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("singleErrorInput", { required: true })} />
      {errors.singleErrorInput && "required 관련 에러 메세지"}

      <input
        {...register("multipleErrorInput", { required: true, maxLength: 30 })}
      />
      {errors.multipleErrorInput?.type === "required" &&
        "required 관련 에러 메세지"}
      {errors.multipleErrorInput?.type === "maxLength" &&
        "maxLength 관련 에러 메세지"}

      <input
        {...register("errorMessage", {
          required: "required error message",
          maxLength: { value: 30, message: "maxLength error message" },
        })}
      />
      {errors.errorMessage?.message}

      <input type="submit" />
    </form>
  );
};
```

### watch

지정된 input을 감시하고 값들을 반환할 때 사용합니다. `watch("name")` 같은 형태로 사용되고 useForm에 defaultValues로 정의되어 있지 않으면 undefined를 반환합니다. 그럴 경우에는 두 번째 인수로 defaultValue를 설정할 수 있습니다.

### handleSubmit

유효성 검사가 완료 되었을 때 폼 데이터를 전달하는 함수입니다.

### reset

폼 안의 필드값과 에러를 초기화하는 함수입니다.

### setError/clearError

setError는 입력값 에러를 수동으로 설정할 수 있습니다.
clearError는 에러를 리셋시킬 수 있습니다.

### setValue/getValue

setValue 함수를 통해 동적으로 input/select의 값을 설정할 수 있습니다. 값이 업데이트되며 에러를 일으킬 때, 에러를 바로잡을 때, formState의 isDirty가 true가 되었을때만 렌더링됩니다.
getValue 함수는 폼의 값을 읽을 때 사용합니다. watch와 다른 점은 리렌더링을 일으키거나 입력값의 변화를 구독하지 않는다는 것입니다.

### formState

폼 상태에 대한 정보를 포함합니다.

- isDirty : 사용자가 어떤 인풋이라도 수정했다면 true
- dirtyFields : 사용자가 수정한 필드들이 기록된 객체
- touched : 사용자가 건드렸던 모든 input을 가진 객체
- isSubmitted : 폼을 제출하고나면 true, (reset 메소드가 호출될 때까지 유지)
- isSubmitSuccessful : 양식이 성공적으로 제출되었음을 나타냄
- submitCount : 폼을 제출한 횟수
- isValid : 에러가 없으면 true
- isValidating : 유효성 검사 중에 true로 설정

> ### **Reference**
>
> <a href="https://react-hook-form.com/" target="_blank">
>   Home | React Hook Form - Simple React forms validation
> </a>
